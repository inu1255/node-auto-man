webpackJsonp([1],{"02X8":function(e,t){},"55dH":function(e,t){},CFBl:function(e,t){},HYRm:function(e,t){},NHnr:function(e,t,r){"use strict";function n(e){if("object"===(void 0===e?"undefined":H()(e))&&!(e instanceof Array)){var t={};for(var r in e)null!=e[r]&&(t[r]=n(e[r]));return t}return e}function s(e,t,r){var s=P()({},Y);return t&&(s.method="POST",s.body="string"!=typeof t?D()(n(t)):t),r&&(s.headers=r),new F.a(function(t,r){fetch(X+e,s).then(function(e){if(e.ok)return e.json()},function(e){return r(e)}).then(function(n){n?void 0===n.no?t(n):200===n.no?t(n.data):401===n.no?(e.indexOf("logout")<0&&ce.dispatch("logout"),r(n.msg)):(A.Message.error(""+n.msg),r(n.msg)):r(404)})})}function a(e){r("HYRm")}function o(e){r("RX4V")}function i(e){r("hX9q")}function c(e){r("55dH")}function u(e){r("CFBl")}function l(e){r("Xfji")}function d(e){e=e||32;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=t.length,n="",s=0;s<e;s++)n+=t.charAt(Math.floor(Math.random()*r));return n}function f(e,t){return"port"===e?Math.floor(1e4*Math.random())+(t||1e4):d(t||6)}Object.defineProperty(t,"__esModule",{value:!0});var p={};r.d(p,"addToCart",function(){return O});var v={};r.d(v,"cartProducts",function(){return $});var m=r("7+uW"),h={name:"app"},b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},g=[],y={render:b,staticRenderFns:g},w=y,x=r("VU/8"),k=x(h,w,!1,null,null,null),S=k.exports,E=r("/ocq"),R=r("NYxO"),O=function(e,t){e.commit},$=function(e){},N=(r("M4fF"),r("bOdI")),C=r.n(N),L=r("Xxa5"),U=r.n(L),q=r("exGp"),T=r.n(q),M=r("//Fk"),F=r.n(M),z=r("mvHQ"),D=r.n(z),G=r("woOf"),P=r.n(G),I=r("pFYg"),H=r.n(I),A=r("zL8q"),V=r.n(A),j=/https?:\/\/[^\/]+/.exec(window.location.href)[0];j=j.indexOf("localhost")<0?j:"http://localhost:3000";var X=j+"/api",Y={credentials:"include",headers:{"content-type":"application/json"}};s.host=j;var B,J=s,K={user:null},W={user:function(e){return e.user},isAdmin:function(e){return e.user&&"admin"==e.user.role},logined:function(e){return Boolean(e.user)}},Q={login:function(e,t){var r=this,n=e.commit;e.state;return T()(U.a.mark(function e(){var s;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("/user/login",t);case 2:s=e.sent,n("USER_LOGIN",s);case 4:case"end":return e.stop()}},e,r)}))()},register:function(e,t){var r=this,n=e.commit;e.state;return T()(U.a.mark(function e(){var s;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("/user/register",t);case 2:s=e.sent,n("USER_LOGIN",s);case 4:case"end":return e.stop()}},e,r)}))()},whoami:function(e,t){var r=this,n=e.commit;e.state;return T()(U.a.mark(function e(){var s;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("/user/whoami?force="+(t?1:0));case 2:s=e.sent,n("USER_LOGIN",s);case 4:case"end":return e.stop()}},e,r)}))()},logout:function(e){var t=this,r=e.commit;e.state;return T()(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J("/user/logout");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:r("USER_LOGIN",null);case 9:case"end":return e.stop()}},e,t,[[0,5]])}))()}},Z=C()({},"USER_LOGIN",function(e,t){if(e.user=t,t){if(/(login)|(register)/.test($t.currentRoute.fullPath)){var r=$t.currentRoute.query.redirect;(!r||r.length<2)&&(r="/user/dashboard"),$t.history.push(r)}}else{if(($t.currentRoute.meta||{}).guest)return;var n=$t.currentRoute.fullPath;/(login)|(register)/.test($t.currentRoute.fullPath)&&(n="/user/dashboard"),$t.history.push({path:"/login",query:{redirect:n}})}}),ee={state:K,getters:W,actions:Q,mutations:Z},te=r("BO1k"),re=r.n(te),ne={nodes_loading:!1,nodes:[],users_loading:!1,users:[],ssrs_loading:!1,ssrs:[]},se={},ae={getNodes:function(e){var t=this,r=e.commit;e.state;return T()(U.a.mark(function e(){var n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r("SET_NODES_LOADING",!0),e.prev=1,e.next=4,J("/ssr/nodelist");case 4:n=e.sent,r("SET_NODES",n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:r("SET_NODES_LOADING",!1);case 12:case"end":return e.stop()}},e,t,[[1,8]])}))()},getUsers:function(e){var t=this,r=e.commit;e.state;return T()(U.a.mark(function e(){var n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r("SET_USERS_LOADING",!0),e.prev=1,e.next=4,J("/ssr/userlist");case 4:n=e.sent,r("SET_USERS",n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:r("SET_USERS_LOADING",!1);case 12:case"end":return e.stop()}},e,t,[[1,8]])}))()},getSsrs:function(e){var t=this,r=e.commit;e.state;return T()(U.a.mark(function e(){var n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r("SET_SSRS_LOADING",!0),e.prev=1,e.next=4,J("/ssr/list");case 4:n=e.sent,r("SET_SSRS",n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:r("SET_SSRS_LOADING",!1);case 12:case"end":return e.stop()}},e,t,[[1,8]])}))()},setSsrs:function(e,t){var r=e.commit;e.state;r("SET_SSRS",t)}},oe=(B={},C()(B,"SET_NODES",function(e,t){e.nodes=t,oe.SSR_COMPUTE(e)}),C()(B,"SET_USERS",function(e,t){e.users=t,oe.SSR_COMPUTE(e)}),C()(B,"SET_SSRS",function(e,t){var r=!0,n=!1,s=void 0;try{for(var a,o=re()(t);!(r=(a=o.next()).done);r=!0){var i=a.value,c=$t.currentRoute.fullPath,u=i.node_id+":"+i.port+":"+i.passwd;i.link=location.href.replace(c,"/user/view?key="+window.btoa(u))}}catch(e){n=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw s}}e.ssrs=t,oe.SSR_COMPUTE(e)}),C()(B,"SSR_COMPUTE",function(e){var t=e.nodes,r=e.users,n=e.ssrs;if(t.length&&n.length&&n.nodes!=t){var s={},a=!0,o=!1,i=void 0;try{for(var c,u=re()(t);!(a=(c=u.next()).done);a=!0){var l=c.value;!function(e){s[e.id]=e;var t=[];e.ssrs=function(){return t}}(l)}}catch(e){o=!0,i=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw i}}var d=!0,f=!1,p=void 0;try{for(var v,m=re()(n);!(d=(v=m.next()).done);d=!0){var l=v.value;!function(e){e.node=_.find(t,function(t){return t.id==e.node_id})||{},e.node.ssrs&&e.node.ssrs().push(e)}(l)}}catch(e){f=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(f)throw p}}Object.defineProperty(n,"nodes",{configurable:!0,value:t})}if(t.length&&n.length&&n.users!=r){var h={},b=!0,g=!1,y=void 0;try{for(var w,x=re()(r);!(b=(w=x.next()).done);b=!0){var k=w.value;!function(e){h[e.id]=e;var t=[];e.ssrs=function(){return t}}(k)}}catch(e){g=!0,y=e}finally{try{!b&&x.return&&x.return()}finally{if(g)throw y}}var S=!0,E=!1,R=void 0;try{for(var O,$=re()(n);!(S=(O=$.next()).done);S=!0){var N=O.value;!function(e){e.user=_.find(r,function(t){return t.id==e.uid})||{},e.user.ssrs&&e.user.ssrs().push(e)}(N)}}catch(e){E=!0,R=e}finally{try{!S&&$.return&&$.return()}finally{if(E)throw R}}Object.defineProperty(n,"nodes",{configurable:!0,value:r})}}),C()(B,"SET_NODES_LOADING",function(e,t){e.nodes_loading=t}),C()(B,"SET_USERS_LOADING",function(e,t){e.users_loading=t}),C()(B,"SET_SSRS_LOADING",function(e,t){e.ssrs_loading=t}),B),ie={state:ne,getters:se,actions:ae,mutations:oe};m.default.use(R.a);var ce=new R.a.Store({actions:p,getters:v,modules:{user:ee,ssr:ie},strict:!1,plugins:[]}),ue=r("Dd8w"),le=r.n(ue),de={name:"Notice",data:function(){return{notice:""}},created:function(){var e=this;return T()(U.a.mark(function t(){return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J("/notice/home");case 2:e.notice=t.sent;case 3:case"end":return t.stop()}},t,e)}))()}},fe=function(){var e=this,t=e.$createElement;return(e._self._c||t)("Markdown",{staticClass:"md",attrs:{value:e.notice}})},pe=[],ve={render:fe,staticRenderFns:pe},me=ve,he=r("VU/8"),_e=he(de,me,!1,null,null,null),be=_e.exports,ge={name:"Home",components:{Notice:be},computed:le()({},Object(R.b)(["logined"]))},ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home-pg"},[r("div",{staticClass:"header"},[r("nav",[r("router-link",{attrs:{to:"/"}},[e._v("云签签")]),e._v(" "),e.logined?r("div",{staticClass:"right"},[r("LoginLink",{attrs:{to:"/login"}},[e._v("注销")])],1):r("div",{staticClass:"right"},[r("LoginLink",[e._v("登录")]),e._v(" "),r("LoginLink",{attrs:{to:"/register"}},[e._v("注册")])],1)],1),e._v(" "),r("div",{staticClass:"content-centor"},[r("router-view")],1)]),e._v(" "),r("Notice")],1)},we=[],xe={render:ye,staticRenderFns:we},ke=xe,Se=r("VU/8"),Ee=a,Re=Se(ge,ke,!1,Ee,"data-v-237a9ac0",null),Oe=Re.exports,$e={name:"Login",data:function(){return{body:{title:"",pass:""},rule:{title:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{type:"string",min:6,message:"密码不少于6位",trigger:"blur"}]}}},created:function(){this.$store.dispatch("logout")},methods:{login:function(e){var t=this;this.$refs[e].validate(function(){var e=T()(U.a.mark(function e(r){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r&&t.$store.dispatch("login",t.body);case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}())}}},Ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form"},[e._m(0),e._v(" "),r("el-form",{ref:"form",attrs:{model:e.body,rules:e.rule,size:"small"}},[r("el-form-item",{attrs:{prop:"title"}},[r("el-input",{attrs:{type:"text","prefix-icon":"ion-ios-person-outline",placeholder:"用户名/邮箱"},model:{value:e.body.title,callback:function(t){e.$set(e.body,"title",t)},expression:"body.title"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password","prefix-icon":"ion-ios-locked-outline",placeholder:"密码"},nativeOn:{keypress:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.login("form")}},model:{value:e.body.password,callback:function(t){e.$set(e.body,"password",t)},expression:"body.password"}})],1),e._v(" "),r("el-form-item",[r("el-button",{staticClass:"login",attrs:{type:"primary"},on:{click:function(t){e.login("form")}}},[e._v("登录")])],1)],1)],1)},Ce=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header"},[r("h6",[e._v("回家咯~~~")])])}],Le={render:Ne,staticRenderFns:Ce},Ue=Le,qe=r("VU/8"),Te=o,Me=qe($e,Ue,!1,Te,"data-v-97355f32",null),Fe=Me.exports,ze={name:"Register",data:function(){var e=this;return{body:{account:"",title:"",code:"",password:"",repass:"",invite:""},seconds:0,rule:{account:[{required:!0,message:"请输入用户名",trigger:"blur"}],title:[{required:!0,message:"请输入邮箱",trigger:"blur"},{pattern:/[^@]+@([^\.]+\.)+[^\.]+/,message:"邮箱格式不正确",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{type:"string",min:6,message:"密码不少于6位",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}],repass:[{required:!0,message:"请重复密码",trigger:"blur"},{validator:function(t,r,n){return n(e.body.password==r&&void 0)},message:"密码不一致",trigger:"blur"}]}}},methods:{register:function(e){var t=this;this.$refs[e].validate(function(){var e=T()(U.a.mark(function e(r){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r&&t.$store.dispatch("register",t.body);case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}())},sendCode:_.debounce(T()(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("/user/send-code?title="+this.body.title);case 2:this.$message.success("发送成功"),this.seconds=60,this.codeTimer();case 5:case"end":return e.stop()}},e,this)}))),codeTimer:function(){var e=this;this.seconds>0&&(this.seconds--,setTimeout(function(){e.codeTimer()},1e3))}}},De=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form"},[e._m(0),e._v(" "),r("el-form",{ref:"form",attrs:{model:e.body,rules:e.rule}},[r("el-form-item",{attrs:{prop:"account"}},[r("el-input",{attrs:{size:"mini","prefix-icon":"ion-ios-person-outline",type:"text",placeholder:"用户名"},model:{value:e.body.account,callback:function(t){e.$set(e.body,"account",t)},expression:"body.account"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"title"}},[r("el-input",{attrs:{size:"mini","prefix-icon":"ion-ios-email-outline",type:"text",placeholder:"邮箱"},model:{value:e.body.title,callback:function(t){e.$set(e.body,"title",t)},expression:"body.title"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{attrs:{size:"mini",type:"text",placeholder:"验证码"},model:{value:e.body.code,callback:function(t){e.$set(e.body,"code",t)},expression:"body.code"}},[r("el-button",{attrs:{slot:"append",disabled:!!e.seconds},on:{click:e.sendCode},slot:"append"},[e._v(e._s(e.seconds?e.seconds+"秒":"获取验证码"))])],1)],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{size:"mini","prefix-icon":"ion-ios-locked-outline",type:"password",placeholder:"密码"},model:{value:e.body.password,callback:function(t){e.$set(e.body,"password",t)},expression:"body.password"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"repass"}},[r("el-input",{attrs:{size:"mini","prefix-icon":"ion-ios-locked-outline",type:"password",placeholder:"重复密码"},model:{value:e.body.repass,callback:function(t){e.$set(e.body,"repass",t)},expression:"body.repass"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"invite"}},[r("el-input",{attrs:{size:"mini","prefix-icon":"ion-happy",placeholder:"输入邀请码，各得100豆"},model:{value:e.body.invite,callback:function(t){e.$set(e.body,"invite",t)},expression:"body.invite"}})],1),e._v(" "),r("el-form-item",[r("el-button",{staticClass:"login",attrs:{type:"primary",size:"small"},on:{click:function(t){e.register("form")}}},[e._v("注册")])],1)],1)],1)},Ge=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header"},[r("h6",[e._v("注册，然后变成一只猫")])])}],Pe={render:De,staticRenderFns:Ge},Ie=Pe,He=r("VU/8"),Ae=i,Ve=He(ze,Ie,!1,Ae,"data-v-14bd1ab1",null),je=Ve.exports,Xe={name:"Main",props:["name","notice"],computed:le()({},Object(R.b)(["logined"]))},Ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main"},[r("h1",[e._v(e._s(e.name||"云签签"))]),e._v(" "),r("h4",[e._v(e._s(e.notice||"交流群: 661969149"))]),e._v(" "),e.logined?r("router-link",{staticClass:"btn home",attrs:{to:"/user/dashboard"}},[e._v("控制面板")]):r("router-link",{staticClass:"btn home",attrs:{to:"/login"}},[e._v("登录")])],1)},Be=[],Je={render:Ye,staticRenderFns:Be},Ke=Je,We=r("VU/8"),Qe=c,Ze=We(Xe,Ke,!1,Qe,"data-v-2fe5f96e",null),et=Ze.exports,tt={data:function(){return{}},methods:{headerSelect:function(e){e.startsWith("/")&&this.$router.push(e)}},computed:le()({},Object(R.b)(["user"]),{path:function(){return this.$router.currentRoute.path}})},rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticStyle:{height:"100vh",border:"1px solid #eee"}},[r("el-header",[r("el-menu",{attrs:{mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.headerSelect}},[r("el-menu-item",{attrs:{index:"/"}},[e._v("\n                云签签\n            ")]),e._v(" "),r("div",{staticStyle:{float:"right"}},[r("el-submenu",{attrs:{index:"2"}},[r("template",{slot:"title"},[e._v(e._s(e.user.name||e.user.account||e.user.email))]),e._v(" "),r("el-menu-item",{attrs:{index:"/login"}},[e._v("注销")])],2)],1)],1)],1),e._v(" "),r("el-container",[r("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[r("el-menu",{attrs:{"default-active":e.path,router:""}},[r("el-menu-item",{attrs:{index:"/user/dashboard"}},[e._v("\n                    我的签到\n                ")]),e._v(" "),r("el-menu-item",{attrs:{index:"/user/start"}},[e._v("\n                    新建签到\n                ")])],1)],1),e._v(" "),r("el-main",[r("router-view")],1)],1)],1)},nt=[],st={render:rt,staticRenderFns:nt},at=st,ot=r("VU/8"),it=u,ct=ot(tt,at,!1,it,"data-v-7f29fde2",null),ut=ct.exports,lt={data:function(){return{data:[]}},created:function(){this.refresh()},computed:le()({},Object(R.b)(["user"]),{invite:function(){if(!this.user||!this.user.id)return"";var e=window.btoa(this.user.id);return e.slice(0,e.length-2)}}),methods:{refresh:function(){var e=this;return T()(U.a.mark(function t(){var r;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.$store.dispatch("whoami",!0),t.next=3,J("/service/list-task");case 3:r=t.sent,e.data=r;case 5:case"end":return t.stop()}},t,e)}))()},del:function(e){var t=this;return T()(U.a.mark(function r(){var n;return U.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,J("/service/del-task?title="+e.title);case 2:return r.next=4,J("/service/list-task");case 4:n=r.sent,t.data=n;case 6:case"end":return r.stop()}},r,t)}))()}}},dt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",[r("el-header",[r("el-button",{attrs:{size:"small"},on:{click:e.refresh}},[e._v("刷新")]),e._v(" "),r("div",{staticClass:"fr",staticStyle:{"line-height":"32px"}},[r("span",{staticStyle:{"margin-right":"7px"}},[e._v("\n                我的邀请码:\n                "),r("b",[e._v(e._s(e.invite))])]),e._v(" "),r("span",[e._v("\n                我的豆豆:\n                "),r("b",[e._v(e._s(e.user.money-e.user.used_money||0))]),e._v("豆\n            ")])])],1),e._v(" "),r("el-main",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.data}},[r("el-table-column",{attrs:{prop:"title",label:"任务名"}}),e._v(" "),r("el-table-column",{attrs:{prop:"count",label:"每天消耗"},scopedSlots:e._u([{key:"default",fn:function(t){return r("span",{},[e._v(e._s(t.row.count)+"豆")])}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"money",label:"总消耗"},scopedSlots:e._u([{key:"default",fn:function(t){return r("span",{},[e._v(e._s(t.row.money)+"豆")])}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"lastrun_at",label:"签到时间"},scopedSlots:e._u([{key:"default",fn:function(t){return r("span",{},[e._v(e._s(e._f("fromNow")(t.row.lastrun_at)))])}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return r("div",{},[r("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(r){e.del(t.row)}}},[e._v("删除")])],1)}}])})],1)],1)],1)},ft=[],pt={render:dt,staticRenderFns:ft},vt=pt,mt=r("VU/8"),ht=mt(lt,vt,!1,null,null,null),_t=ht.exports,bt={data:function(){return{data:[],info:!1,title:""}},created:function(){this.refresh()},computed:le()({},Object(R.b)(["user"])),methods:{refresh:function(){var e=this;return T()(U.a.mark(function t(){var r;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J("/service/history-tree");case 2:r=t.sent,e.data=r;case 4:case"end":return t.stop()}},t,e)}))()},start:function(){var e=this;return T()(U.a.mark(function t(){var r,n;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J("/service/start");case 2:r=t.sent,e.$set(e.user,"port",r.port),n=location.host.split(":")[0],e.$alert("请连接代理: http://"+n+":"+r.port,"代理信息");case 6:case"end":return t.stop()}},t,e)}))()},stop:function(){var e=this;return T()(U.a.mark(function t(){return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J("/service/stop");case 2:e.user.port=0;case 3:case"end":return t.stop()}},t,e)}))()},selectNode:function(e,t,r){var n=this;return T()(U.a.mark(function t(){return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.id){t.next=2;break}return t.abrupt("return");case 2:if(e.data){t.next=6;break}return t.next=5,J("/service/history?id="+e.id);case 5:e.data=t.sent;case 6:console.log(e.data),n.info=e.data;case 8:case"end":return t.stop()}},t,n)}))()},add:function(){var e=this;return T()(U.a.mark(function t(){var r;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((r=e.$refs.tree.getCheckedKeys())&&r.length){t.next=4;break}return e.$message.error("请勾选任务"),t.abrupt("return");case 4:if(e.title){t.next=7;break}return e.$message.error("请输入任务名"),t.abrupt("return");case 7:return t.next=9,J("/service/add-task",{ids:r,title:e.title});case 9:e.tilte="",e.$message.success("添加成功"),e.refresh();case 12:case"end":return t.stop()}},t,e)}))()},clear:function(){var e=this;return T()(U.a.mark(function t(){return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J("/service/clear");case 2:e.refresh();case 3:case"end":return t.stop()}},t,e)}))()}}},gt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",[r("el-header",[r("span",{directives:[{name:"show",rawName:"v-show",value:e.user&&e.user.port,expression:"user&&user.port"}]},[r("div",{staticClass:"stop"},[e._v(e._s((e.user||{}).port))]),e._v(" "),r("el-button",{attrs:{size:"small"},on:{click:e.stop}},[e._v("停止")])],1),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:!e.user||!e.user.port,expression:"!user||!user.port"}]},[r("el-button",{attrs:{size:"small"},on:{click:e.start}},[e._v("开始")])],1),e._v(" "),r("el-button",{attrs:{size:"small"},on:{click:e.refresh}},[e._v("刷新")]),e._v(" "),r("el-button",{attrs:{size:"small"},on:{click:e.clear}},[e._v("清空")]),e._v(" "),r("el-input",{staticClass:"add",attrs:{placeholder:"请输入标题",size:"small"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}},[r("el-button",{attrs:{slot:"append"},on:{click:e.add},slot:"append"},[e._v("添加任务")])],1)],1),e._v(" "),r("el-container",[r("el-aside",[r("el-tree",{ref:"tree",attrs:{data:e.data,"show-checkbox":"","node-key":"id"},on:{"node-click":e.selectNode}})],1),e._v(" "),r("el-main",[r("HttpCard",{attrs:{info:e.info}})],1)],1)],1)},yt=[],wt={render:gt,staticRenderFns:yt},xt=wt,kt=r("VU/8"),St=l,Et=kt(bt,xt,!1,St,"data-v-3592ee93",null),Rt=Et.exports,Ot=new E.a({routes:[{path:"/",name:"Home",component:Oe,children:[{path:"",name:"Main",component:et},{path:"login",name:"Login",component:Fe},{path:"register",name:"Register",component:je}]},{path:"/user",name:"User",component:ut,children:[{path:"",name:"DashBoard",component:_t,alias:"dashboard"},{path:"start",name:"History",component:Rt,alias:"dashboard"}]}]});m.default.use(E.a),ce.dispatch("whoami"),Ot.beforeEach(function(e,t,r){if(e.meta.requireAuth){var n=ce.getters.user();n?e.meta.requireAdmin&&"admin"!=n.role||r():r({path:"/login",query:{redirect:e.fullPath}})}else r()});var $t=Ot,Nt={name:"Markdown",props:["value"],computed:{compiledMarkdown:function(){return marked(this.value,{sanitize:!0})}}},Ct=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{domProps:{innerHTML:e._s(e.compiledMarkdown)}})},Lt=[],Ut={render:Ct,staticRenderFns:Lt},qt=Ut,Tt=r("VU/8"),Mt=Tt(Nt,qt,!1,null,null,null),Ft=Mt.exports,zt={name:"LoginLink",props:{to:{default:"/login"}},computed:{to_:function(){var e=this.$router.currentRoute,t=e.fullPath;return/(login)|(register)/.test(e.fullPath)&&(t=void 0),{path:this.to,query:{redirect:t}}}}},Dt=function(){var e=this,t=e.$createElement;return(e._self._c||t)("router-link",{attrs:{to:e.to_}},[e._t("default")],2)},Gt=[],Pt={render:Dt,staticRenderFns:Gt},It=Pt,Ht=r("VU/8"),At=Ht(zt,It,!1,null,null,null),Vt=At.exports,jt=(r("xe4/"),{props:{info:{default:!1}},computed:{req_body:function(){return this.info&&this.info.req_body?("string"==typeof this.info.req_header&&(this.info.req_header=JSON.parse(this.info.req_header)),window.atob(this.info.req_body)):""},res_body:function(){return this.info?("string"==typeof this.info.res_header&&(this.info.res_header=JSON.parse(this.info.res_header)),window.atob(this.info.res_body)):""}}}),Xt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.info?r("el-collapse",{attrs:{value:"5"}},[r("div",[r("b",{staticStyle:{"margin-right":"1rem"}},[e._v(e._s(e.info.method))]),e._v(" "),r("span",[e._v(e._s(e.info.url))])]),e._v(" "),r("el-collapse-item",{attrs:{title:"请求头",name:"2"}},[r("div",[e._v(e._s(e.info.req_header))])]),e._v(" "),r("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:e.info.req_body,expression:"info.req_body"}],attrs:{title:"请求body",name:"3"}},[r("div",[e._v(e._s(e.req_body))])]),e._v(" "),r("el-collapse-item",{attrs:{title:"响应头",name:"4"}},[r("div",[e._v(e._s(e.info.res_header))])]),e._v(" "),r("el-collapse-item",{attrs:{title:"响应body",name:"5"}},[r("div",[e._v(e._s(e.res_body))])])],1):e._e()},Yt=[],Bt={render:Xt,staticRenderFns:Yt},Jt=Bt,Kt=r("VU/8"),Wt=Kt(jt,Jt,!1,null,null,null),Qt=Wt.exports,Zt={install:function(e,t){m.default.filter("fromNow",function(e){return"number"==typeof e&&e<1e12&&(e*=1e3),moment(e).fromNow()}),m.default.filter("date",function(e){return"number"==typeof e&&e<1e12&&(e*=1e3),moment(e).format("YYYY-MM-DD")}),m.default.filter("time",function(e){return"number"==typeof e&&e<1e12&&(e*=1e3),moment(e).format("HH:mm:ss")});var r=["b","Kb","Mb","Gb"];m.default.filter("traffic",function(e,t,n){for(e=parseInt(e),n=n||0,t=t||0;t<4;t++){if(e<1024)return e+r[t];e=(e/1024).toFixed(n)}return e+"GB"}),m.default.directive("random",{bind:function(e,t,r){var n=t.arg,s=t.value;r.data.model&&(e.__vue__.__random&&e.__vue__.$off("on-click",e.__vue__.__random),e.__vue__.__random=new Function("n","r","v","n.context."+r.data.model.expression+'=r("'+n+'",v)').bind(this,r,f,s),e.__vue__.$on("on-click",e.__vue__.__random))}}),m.default.component("Markdown",Ft),m.default.component("LoginLink",Vt),m.default.component("HttpCard",Qt)}};r("tvR6"),r("02X8");m.default.use(V.a),m.default.use(Zt),new m.default({el:"#app",store:ce,router:$t,render:function(e){return e(S)}})},RX4V:function(e,t){},Xfji:function(e,t){},hX9q:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.db37482d1a96321668d7.js.map